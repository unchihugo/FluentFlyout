<Page x:Class="FluentFlyoutWPF.Pages.AboutPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
      xmlns:ui="http://schemas.lepo.co/wpfui/2022/xaml"
      xmlns:controls="clr-namespace:MicaWPF.Controls;assembly=MicaWPF"
      xmlns:viewModels="clr-namespace:FluentFlyoutWPF.ViewModels"
      mc:Ignorable="d" 
      d:DesignHeight="450" d:DesignWidth="800"
      Title="AboutPage"
      d:DataContext="{d:DesignInstance viewModels:UserSettings}"
      ui:Design.Background="{DynamicResource ApplicationBackgroundBrush}"
        ui:Design.Foreground="{DynamicResource TextFillColorPrimaryBrush}"
        Foreground="{DynamicResource TextFillColorPrimaryBrush}">

    <ui:PassiveScrollViewer HorizontalScrollBarVisibility="Auto">
        <StackPanel MaxWidth="1000" Margin="16">
            <TextBlock Text="{DynamicResource AboutPremiumTitle}" FontSize="20" FontWeight="SemiBold" FontFamily="Segoe UI Variable" Margin="0,0,0,0"/>
            <Grid Margin="0,12,0,0">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                
                <!-- Premium Status InfoBar (only shown for Store versions) -->
                <ui:InfoBar Grid.Row="1" Title="{DynamicResource PremiumUnlockedMessage}" Severity="Success" IsClosable="False" Margin="0,0,0,12">
                    <ui:InfoBar.Style>
                        <Style TargetType="ui:InfoBar" BasedOn="{StaticResource {x:Type ui:InfoBar}}">
                            <Setter Property="IsOpen" Value="False" />
                            <Style.Triggers>
                                <MultiDataTrigger>
                                    <MultiDataTrigger.Conditions>
                                        <Condition Binding="{Binding IsStoreVersion}" Value="True"/>
                                        <Condition Binding="{Binding IsPremiumUnlocked}" Value="True"/>
                                    </MultiDataTrigger.Conditions>
                                    <Setter Property="IsOpen" Value="True"/>
                                </MultiDataTrigger>
                            </Style.Triggers>
                        </Style>
                    </ui:InfoBar.Style>
                </ui:InfoBar>

                <!-- Premium Locked InfoBar (only shown for Store versions without premium) -->
                <ui:InfoBar Grid.Row="1" IsOpen="True" Severity="Warning" IsClosable="False" Margin="0,0,0,12">
                    <ui:InfoBar.Style>
                        <Style TargetType="ui:InfoBar">
                            <Setter Property="Visibility" Value="Collapsed"/>
                            <Style.Triggers>
                                <MultiDataTrigger>
                                    <MultiDataTrigger.Conditions>
                                        <Condition Binding="{Binding IsStoreVersion}" Value="True"/>
                                        <Condition Binding="{Binding IsPremiumUnlocked}" Value="False"/>
                                    </MultiDataTrigger.Conditions>
                                    <Setter Property="Visibility" Value="Visible"/>
                                </MultiDataTrigger>
                            </Style.Triggers>
                        </Style>
                    </ui:InfoBar.Style>
                    <StackPanel Orientation="Horizontal">
                        <controls:Button x:Name="UnlockPremiumButton" Content="{DynamicResource UnlockPremiumButton}" 
                               Click="UnlockPremiumButton_Click" 
                               Style="{StaticResource MicaWPF.Styles.AccentedButton}"
                               Margin="12,0,0,0" Padding="12,4,12,4" FontSize="12" Height="28"/>
                    </StackPanel>
                </ui:InfoBar>

                <!-- GitHub Version InfoBar -->
                <ui:InfoBar Grid.Row="1" Title="{DynamicResource PremiumGitHubMessage}" IsOpen="True" Severity="Informational" IsClosable="False" Margin="0,0,0,12">
                    <ui:InfoBar.Style>
                        <Style TargetType="ui:InfoBar" BasedOn="{StaticResource {x:Type ui:InfoBar}}">
                            <Setter Property="Visibility" Value="Collapsed" />
                            <Style.Triggers>
                                <DataTrigger Binding="{Binding IsStoreVersion}" Value="False">
                                    <Setter Property="Visibility" Value="Visible"/>
                                </DataTrigger>
                            </Style.Triggers>
                        </Style>
                    </ui:InfoBar.Style>
                </ui:InfoBar>

                <TextBlock Grid.Row="2" FontSize="14" Margin="4,0,0,0" FontWeight="Regular" HorizontalAlignment="Left" Opacity="0.75" MaxWidth="600" TextWrapping="WrapWithOverflow" Text="{DynamicResource PremiumFeatureDescription}"/>
            </Grid>
        </StackPanel>
    </ui:PassiveScrollViewer>
</Page>
